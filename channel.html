<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Channeling</title>
    
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
	<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
    
    
</head>

	<script type="text/javascript">

	  // if the count variable is undefined, set its value to zero
	  
	  var count = 0;
	  

	  // function to increment value of count variable
	  function incrementCount() {
		count = document.getElementById("count").value
		count++;
		document.getElementById("count").value = count;
		console.log(count);
		iftttTweet();
	  };
	  
	  
	// Enter your key, values and event trigger name here
	
		var myKey = "n73ITRoRh7vIEnLpCSjvhtqM8lfjYijLGBleVsv6pGn";
		var val1 = "webapp";
		var val2 = "0";
		var val3 = "123";
		var trigger = "button_pressed";

		function iftttTweet(){
		  val1 = document.getElementById("count").value;
		  val2 = document.getElementById("count").value;
		  var url = "https://maker.ifttt.com/trigger/" + trigger +
			  "/with/key/" + myKey +
			  "?value1=" + val1 + 
			  "&value2=" + val2 + 
			  "&value3=" + val3;
		  var request = new XMLHttpRequest();
		  console.log("Inside Function")
		  request.onreadystatechange = function() {
			if (request.readyState === 4) {
			  alert("request got: " + request.responseText);
			}
		  };
		  request.open('GET', url, true);
		  request.send();
		}
	
	
  </script>
<body>
<div data-role="page">

	<div data-role="header">
		<a href="menu.html" data-rel="back">Home</a>
		<h1>Channel Counter</h1>
	</div>
	
<div class="jquery-script-clear"></div>


<div class="container">

	<!---div class="js-spinner"> <!-- js-spinner is an important scoping class for the input controls. 
		<input type="number" step="1" max="150" min="0" data-stepper-debounce="400" class="js-stepper form-control">
		
			<div style="text-align : center;">
				<a type="button" spinner-button="up" title="add 1" class="btn btn-primary">
				<img src="images/add.ico" >
				</a>
			</div>

	</div>-->
	<form action="" method="post" >
		<fieldset data-role="fieldcontain"> 
				<label for="count">Patient No:</label>
				<input type="text" name="count" id="count">
		</fieldset>
		
		<div style="text-align : center;">
			<a type="button"  class="btn btn-primary" onClick="return  incrementCount();">
				<img src="images/add.ico" >				
			</a>
		</div>
	</form>
</div>
</div>

	
</body>
</html>